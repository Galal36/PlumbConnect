import requests
import time
from django.conf import settings
from typing import Dict, Any, Optional


class AIClientBase:
    def __init__(self):
        self.max_tokens = getattr(settings, 'AI_MAX_TOKENS', 1000)
        self.temperature = getattr(settings, 'AI_TEMPERATURE', 0.7)

    def generate_response(self, message: str, conversation_history: list = None) -> Dict[str, Any]:
        raise NotImplementedError("Subclasses must implement generate_response method")


class GrokClient(AIClientBase):
    def __init__(self):
        super().__init__()
        self.api_key = getattr(settings, 'XAI_API_KEY', '')
        self.base_url = "https://api.x.ai/v1"

    def generate_response(self, message: str, conversation_history: list = None) -> Dict[str, Any]:
        if not self.api_key:
            return {
                'success': False,
                'error': 'Grok API key not configured',
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø®Ø¯Ù…Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.'
            }

        # Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙˆØ§Ù„ÙƒÙˆÙŠØªÙŠ
        messages = [
            {
                "role": "system",
                "content": """Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„Ù…ÙˆÙ‚Ø¹ PlumbingConnect - Ù…Ù†ØµØ© ØªØ±Ø¨Ø· Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª.

Ù…Ù‡Ø§Ù…Ùƒ:
1. Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¨Ø§ÙƒÙŠÙ† Ù…Ù†Ø§Ø³Ø¨ÙŠÙ†
2. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø­ÙˆÙ„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©
3. Ø´Ø±Ø­ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹
4. ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø© Ø­ÙˆÙ„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø¨Ø§ÙƒØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
5. ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹

Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ù‡Ù…Ø©:
- Ø£Ø¬Ø¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ÙƒÙˆÙŠØªÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
- ÙƒÙ† Ù…ÙÙŠØ¯Ø§Ù‹ ÙˆÙ…Ù‡Ø°Ø¨Ø§Ù‹
- Ù„Ø§ ØªÙ‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ© Ø£Ùˆ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©
- ÙˆØ¬Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù‡Ù†ÙŠØ© Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- Ø§Ø°ÙƒØ± Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© (Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ†ØŒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§ØªØŒ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª)"""
            }
        ]

        # Ø¥Ø¶Ø§ÙØ© ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        if conversation_history:
            for msg in conversation_history[-10:]:  # Ø¢Ø®Ø± 10 Ø±Ø³Ø§Ø¦Ù„ ÙÙ‚Ø·
                role = "user" if msg.message_type == "user" else "assistant"
                messages.append({"role": role, "content": msg.content})

        # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        messages.append({"role": "user", "content": message})

        start_time = time.time()

        try:
            response = requests.post(
                f"{self.base_url}/chat/completions",
                headers={
                    "Authorization": f"Bearer {self.api_key}",
                    "Content-Type": "application/json"
                },
                json={
                    "model": "grok-beta",
                    "messages": messages,
                    "max_tokens": self.max_tokens,
                    "temperature": self.temperature
                },
                timeout=30
            )

            response_time = time.time() - start_time

            if response.status_code == 200:
                data = response.json()
                return {
                    'success': True,
                    'response': data['choices'][0]['message']['content'],
                    'tokens_used': data.get('usage', {}).get('total_tokens', 0),
                    'response_time': response_time,
                    'model': 'grok-beta'
                }
            else:
                return {
                    'success': False,
                    'error': f'Grok API error: {response.status_code}',
                    'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                    'response_time': response_time
                }

        except requests.exceptions.Timeout:
            return {
                'success': False,
                'error': 'Request timeout',
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ø³ØªØºØ±Ù‚ Ø§Ù„Ø±Ø¯ ÙˆÙ‚ØªØ§Ù‹ Ø£Ø·ÙˆÙ„ Ù…Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                'response_time': time.time() - start_time
            }
        except Exception as e:
            return {
                'success': False,
                'error': str(e),
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                'response_time': time.time() - start_time
            }


class DeepSeekClient(AIClientBase):
    def __init__(self):
        super().__init__()
        self.api_key = getattr(settings, 'DEEPSEEK_API_KEY', '')
        self.base_url = "https://api.deepseek.com/v1"

    def generate_response(self, message: str, conversation_history: list = None) -> Dict[str, Any]:
        if not self.api_key:
            return {
                'success': False,
                'error': 'DeepSeek API key not configured',
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø®Ø¯Ù…Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ØºÙŠØ± Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.'
            }

        # Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ù…Ø«Ù„ Grok Ù„ÙƒÙ† Ù…Ø¹ DeepSeek API
        messages = [
            {
                "role": "system",
                "content": """Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„Ù…ÙˆÙ‚Ø¹ PlumbingConnect - Ù…Ù†ØµØ© ØªØ±Ø¨Ø· Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ† Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª.

Ù…Ù‡Ø§Ù…Ùƒ:
1. Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¨Ø§ÙƒÙŠÙ† Ù…Ù†Ø§Ø³Ø¨ÙŠÙ†
2. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø© Ø­ÙˆÙ„ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©
3. Ø´Ø±Ø­ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹
4. ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø© Ø­ÙˆÙ„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø¨Ø§ÙƒØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©
5. ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹

Ù‚ÙˆØ§Ø¹Ø¯ Ù…Ù‡Ù…Ø©:
- Ø£Ø¬Ø¨ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¯Ø§Ø¦Ù…Ø§Ù‹
- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„ÙƒÙˆÙŠØªÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
- ÙƒÙ† Ù…ÙÙŠØ¯Ø§Ù‹ ÙˆÙ…Ù‡Ø°Ø¨Ø§Ù‹
- Ù„Ø§ ØªÙ‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­ Ø·Ø¨ÙŠØ© Ø£Ùˆ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©
- ÙˆØ¬Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù„Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù‡Ù†ÙŠØ© Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- Ø§Ø°ÙƒØ± Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© (Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ†ØŒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§ØªØŒ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª)"""
            }
        ]

        if conversation_history:
            for msg in conversation_history[-10:]:
                role = "user" if msg.message_type == "user" else "assistant"
                messages.append({"role": role, "content": msg.content})

        messages.append({"role": "user", "content": message})

        start_time = time.time()

        try:
            response = requests.post(
                f"{self.base_url}/chat/completions",
                headers={
                    "Authorization": f"Bearer {self.api_key}",
                    "Content-Type": "application/json"
                },
                json={
                    "model": "deepseek-chat",
                    "messages": messages,
                    "max_tokens": self.max_tokens,
                    "temperature": self.temperature
                },
                timeout=30
            )

            response_time = time.time() - start_time

            if response.status_code == 200:
                data = response.json()
                return {
                    'success': True,
                    'response': data['choices'][0]['message']['content'],
                    'tokens_used': data.get('usage', {}).get('total_tokens', 0),
                    'response_time': response_time,
                    'model': 'deepseek-chat'
                }
            else:
                return {
                    'success': False,
                    'error': f'DeepSeek API error: {response.status_code}',
                    'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                    'response_time': response_time
                }

        except requests.exceptions.Timeout:
            return {
                'success': False,
                'error': 'Request timeout',
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ø³ØªØºØ±Ù‚ Ø§Ù„Ø±Ø¯ ÙˆÙ‚ØªØ§Ù‹ Ø£Ø·ÙˆÙ„ Ù…Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                'response_time': time.time() - start_time
            }
        except Exception as e:
            return {
                'success': False,
                'error': str(e),
                'response': 'Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
                'response_time': time.time() - start_time
            }


# Mock client Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† API keys
class MockAIClient(AIClientBase):
    def generate_response(self, message: str, conversation_history: list = None) -> Dict[str, Any]:
        # ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ¥Ø¹Ø·Ø§Ø¡ Ø±Ø¯ Ù…Ù†Ø§Ø³Ø¨
        message_lower = message.lower()

        # Ø±Ø¯ÙˆØ¯ Ø°ÙƒÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©

        # ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø­Ù†ÙÙŠØ©/Ø§Ù„ØµÙ†Ø¨ÙˆØ±
        if any(word in message_lower for word in ['Ø±ÙƒØ¨', 'ØªØ±ÙƒÙŠØ¨', 'Ø¬Ù†ÙÙŠØ©', 'Ø­Ù†ÙÙŠØ©', 'ØµÙ†Ø¨ÙˆØ±']) and any(word in message_lower for word in ['Ø§Ø²Ø§ÙŠ', 'ÙƒÙŠÙ', 'Ø·Ø±ÙŠÙ‚Ø©']):
            response = """Ø®Ø·ÙˆØ§Øª ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø­Ù†ÙÙŠØ© (Ø§Ù„ØµÙ†Ø¨ÙˆØ±):

ðŸ”§ **Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
- Ù…ÙØ§ØªÙŠØ­ Ø±Ø¨Ø· Ù…Ø®ØªÙ„ÙØ© Ø§Ù„Ø£Ø­Ø¬Ø§Ù…
- Ø´Ø±ÙŠØ· ØªÙŠÙÙ„ÙˆÙ† (Teflon tape)
- Ø¬ÙˆØ§Ù†Ø§Øª Ù…Ø·Ø§Ø·ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
- Ù…Ø§Ø¯Ø© Ø¹Ø§Ø²Ù„Ø© Ù„Ù„Ø®ÙŠÙˆØ·

ðŸ“‹ **Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ±ÙƒÙŠØ¨:**
1. **Ø£ØºÙ„Ù‚ Ø§Ù„Ù…ÙŠØ§Ù‡:** Ø£ØºÙ„Ù‚ ØµÙ…Ø§Ù… Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
2. **Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…:** ÙÙƒ Ø§Ù„Ø­Ù†ÙÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ø­Ø°Ø±
3. **ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙƒØ§Ù†:** Ù†Ø¸Ù Ù…ÙƒØ§Ù† Ø§Ù„ØªØ±ÙƒÙŠØ¨ Ù…Ù† Ø§Ù„Ø£ÙˆØ³Ø§Ø®
4. **Ù„Ù Ø§Ù„Ø®ÙŠÙˆØ·:** Ø§Ø³ØªØ®Ø¯Ù… Ø´Ø±ÙŠØ· Ø§Ù„ØªÙŠÙÙ„ÙˆÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø®ÙŠÙˆØ·
5. **Ø§Ù„ØªØ±ÙƒÙŠØ¨:** Ø±ÙƒØ¨ Ø§Ù„Ø­Ù†ÙÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ§Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ø¥Ø­ÙƒØ§Ù…
6. **Ø§Ù„ØªÙˆØµÙŠÙ„:** ÙˆØµÙ„ Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø³Ø§Ø®Ù†Ø© ÙˆØ§Ù„Ø¨Ø§Ø±Ø¯Ø©
7. **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:** Ø§ÙØªØ­ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆØ§Ø®ØªØ¨Ø± Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØªØ³Ø±ÙŠØ¨

âš ï¸ **ØªØ­Ø°ÙŠØ±:** Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ØªØ£ÙƒØ¯Ø§Ù‹ØŒ Ø§Ø³ØªØ¹Ù† Ø¨Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±."""

        # Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø³Ø¨Ø§ÙƒØ©
        elif any(word in message_lower for word in ['ØªÙˆØµÙŠÙ„', 'ØªÙˆØµÙŠÙ„Ø§Øª', 'Ø§Ø³Ø§Ø³ÙŠØ©', 'Ø£Ø³Ø§Ø³ÙŠØ©', 'Ø´Ø±Ø­']) and any(word in message_lower for word in ['Ø³Ø¨Ø§ÙƒØ©', 'Ø­Ù…Ø§Ù…', 'Ù…Ø·Ø¨Ø®']):
            response = """Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø³Ø¨Ø§ÙƒØ©:

ðŸ  **ÙÙŠ Ø§Ù„Ø­Ù…Ø§Ù…:**
1. **Ø®Ø· Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø¨Ø§Ø±Ø¯Ø©:** Ù…Ù† Ø§Ù„Ø®Ø²Ø§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
2. **Ø®Ø· Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø³Ø§Ø®Ù†Ø©:** Ù…Ù† Ø§Ù„Ø³Ø®Ø§Ù†
3. **ØµØ±Ù Ø§Ù„Ø­ÙˆØ¶:** ÙŠØªØµÙ„ Ø¨Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
4. **ØµØ±Ù Ø§Ù„Ø­Ù…Ø§Ù…:** Ø£Ù†Ø¨ÙˆØ¨ Ù…Ù†ÙØµÙ„ Ù„Ù„Ù…Ø¬Ø§Ø±ÙŠ
5. **ØµØ±Ù Ø§Ù„Ù…Ø±Ø­Ø§Ø¶:** Ø§ØªØµØ§Ù„ Ù…Ø¨Ø§Ø´Ø± Ø¨Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ

ðŸ”§ **Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
- **Ø§Ù„ØµÙ…Ø§Ù…Ø§Øª:** Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ ØªØ¯ÙÙ‚ Ø§Ù„Ù…ÙŠØ§Ù‡
- **Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨:** PVC Ø£Ùˆ Ù†Ø­Ø§Ø³ Ù„Ù„ØªÙˆØµÙŠÙ„
- **Ø§Ù„Ø¬ÙˆØ§Ù†Ø§Øª:** Ù„Ù…Ù†Ø¹ Ø§Ù„ØªØ³Ø±ÙŠØ¨
- **Ø§Ù„Ø³ÙŠÙÙˆÙ†:** Ù„Ù…Ù†Ø¹ Ø±Ø¬ÙˆØ¹ Ø§Ù„Ø±ÙˆØ§Ø¦Ø­

ðŸš¨ **Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ø¬Ù„Ø©:**
- Ø£ØºÙ„Ù‚ Ø§Ù„ØµÙ…Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙˆØ±Ø§Ù‹
- ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹Ù†Ø§
- Ù„Ø§ ØªØ­Ø§ÙˆÙ„ Ø¥ØµÙ„Ø§Ø­Ø§Øª Ù…Ø¹Ù‚Ø¯Ø© Ø¨Ù†ÙØ³Ùƒ

Ù‡Ù„ ØªØ­ØªØ§Ø¬ ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø± Ø¹Ù† Ø¬Ø²Ø¡ Ù…Ø¹ÙŠÙ†ØŸ"""

        # ØªØ³Ø±ÙŠØ¨ Ø§Ù„Ù…ÙŠØ§Ù‡
        elif any(word in message_lower for word in ['ØªØ³Ø±ÙŠØ¨', 'ØªØ³Ø±Ø¨', 'Ù…Ø§Ø¡', 'Ù…ÙŠØ§Ù‡']) and not any(word in message_lower for word in ['Ø±ÙƒØ¨', 'ØªØ±ÙƒÙŠØ¨']):
            response = """Ù„Ø¥ØµÙ„Ø§Ø­ ØªØ³Ø±ÙŠØ¨ Ø§Ù„Ù…Ø§Ø¡:

ðŸ” **ØªØ­Ø¯ÙŠØ¯ Ù…ØµØ¯Ø± Ø§Ù„ØªØ³Ø±ÙŠØ¨:**
- Ù…Ù† Ø§Ù„ØµÙ†Ø¨ÙˆØ±/Ø§Ù„Ø­Ù†ÙÙŠØ©
- Ù…Ù† Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨
- Ù…Ù† Ø§Ù„Ù…Ø±Ø­Ø§Ø¶
- Ù…Ù† Ø§Ù„Ø­ÙˆØ¶

ðŸ”§ **Ù„Ù„ØªØ³Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„ØµÙ†Ø¨ÙˆØ±:**
1. Ø£ØºÙ„Ù‚ Ù…ØµØ¯Ø± Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
2. ÙÙƒ Ø§Ù„ØµÙ†Ø¨ÙˆØ± Ø¨Ø­Ø°Ø±
3. Ø§ÙØ­Øµ Ø§Ù„Ø¬ÙˆØ§Ù†Ø§Øª (Ø§Ù„Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ù…Ø·Ø§Ø·ÙŠØ©)
4. Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø¬ÙˆØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ù„ÙØ©
5. Ø£Ø¹Ø¯ ØªØ±ÙƒÙŠØ¨ Ø§Ù„ØµÙ†Ø¨ÙˆØ±

ðŸš° **Ù„Ù„ØªØ³Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨:**
1. Ø£ØºÙ„Ù‚ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙÙˆØ±Ø§Ù‹
2. Ø­Ø¯Ø¯ Ù…ÙƒØ§Ù† Ø§Ù„ØªØ³Ø±ÙŠØ¨ Ø¨Ø¯Ù‚Ø©
3. Ø§Ø³ØªØ®Ø¯Ù… Ø´Ø±ÙŠØ· Ø¥ØµÙ„Ø§Ø­ Ù…Ø¤Ù‚Øª
4. Ø§ØªØµÙ„ Ø¨Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù

âš ï¸ **ØªØ­Ø°ÙŠØ±:** Ù„Ù„ØªØ³Ø±ÙŠØ¨Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©ØŒ Ø§ØªØµÙ„ Ø¨Ø³Ø¨Ø§Ùƒ ÙÙˆØ±Ø§Ù‹ Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±."""

        # Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ
        elif any(word in message_lower for word in ['Ø§Ù†Ø³Ø¯Ø§Ø¯', 'Ù…Ø³Ø¯ÙˆØ¯', 'Ù…Ø¬Ø§Ø±ÙŠ', 'Ø¨Ø§Ù„ÙˆØ¹Ø©']):
            response = """Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ:

ðŸš¿ **Ù„Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø¨Ø³ÙŠØ·:**
1. Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙƒØ¨Ø³ (Ø§Ù„Ø¨Ù„Ù†Ø¬Ø±)
2. Ø¬Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ø§Ù„Ø³Ø§Ø®Ù† Ù…Ø¹ Ø§Ù„ØµØ§Ø¨ÙˆÙ†
3. Ø§Ø³ØªØ®Ø¯Ù… Ø®Ù„ÙŠØ· Ø§Ù„Ø®Ù„ ÙˆØ¨ÙŠÙƒØ±Ø¨ÙˆÙ†Ø§Øª Ø§Ù„ØµÙˆØ¯ÙŠÙˆÙ…
4. Ø¬Ø±Ø¨ Ø³Ù„Ùƒ Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ù„Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø·Ø­ÙŠ

ðŸ”§ **Ù„Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø´Ø¯ÙŠØ¯:**
- ØªØ­ØªØ§Ø¬ Ù„Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù Ù…Ø¹ Ù…Ø¹Ø¯Ø§Øª Ø®Ø§ØµØ©
- Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ø§Ù„Ù‚ÙˆÙŠØ©
- Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ù…Ø§ÙƒÙŠÙ†Ø© ØªØ³Ù„ÙŠÙƒ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ

âš ï¸ **Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ø´Ø¯ÙŠØ¯:**
- Ø±Ø¬ÙˆØ¹ Ø§Ù„Ù…ÙŠØ§Ù‡ Ù…Ù† Ø§Ù„Ø¨Ø§Ù„ÙˆØ¹Ø©
- Ø±ÙˆØ§Ø¦Ø­ ÙƒØ±ÙŠÙ‡Ø© Ù…Ø³ØªÙ…Ø±Ø©
- Ø¨Ø·Ø¡ ÙÙŠ ØªØµØ±ÙŠÙ Ø§Ù„Ù…ÙŠØ§Ù‡

ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø³Ø¨Ø§Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…ÙˆÙ‚Ø¹Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙˆØ±ÙŠØ©."""

        # Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©
        elif any(word in message_lower for word in ['Ø£Ø¯ÙˆØ§Øª', 'Ø¹Ø¯Ø©', 'Ù…ÙØ§ØªÙŠØ­', 'Ø£Ø¯ÙˆØ§Øª Ø³Ø¨Ø§ÙƒØ©', 'Ù…Ø·Ù„ÙˆØ¨Ø©', 'Ø§Ø­ØªØ§Ø¬']):
            response = """Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø³Ø¨Ø§ÙƒØ©:

ðŸ”§ **Ø£Ø¯ÙˆØ§Øª Ø£Ø³Ø§Ø³ÙŠØ©:**
- Ù…ÙØ§ØªÙŠØ­ Ø±Ø¨Ø· Ù…Ø®ØªÙ„ÙØ© Ø§Ù„Ø£Ø­Ø¬Ø§Ù…
- Ù…ÙƒØ¨Ø³ (Ø¨Ù„Ù†Ø¬Ø±) Ù„Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯
- Ø´Ø±ÙŠØ· ØªÙŠÙÙ„ÙˆÙ† Ù„Ù„Ø®ÙŠÙˆØ·
- Ù…ÙÙƒ Ø¨Ø±Ø§ØºÙŠ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø¬Ø§Ù…
- Ù…Ù†Ø´Ø§Ø± Ø£Ù†Ø§Ø¨ÙŠØ¨

ðŸ› ï¸ **Ø£Ø¯ÙˆØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©:**
- Ù…Ø§ÙƒÙŠÙ†Ø© ØªØ³Ù„ÙŠÙƒ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ
- Ø¬Ù‡Ø§Ø² ÙƒØ´Ù Ø§Ù„ØªØ³Ø±ÙŠØ¨
- Ù…ÙØ§ØªÙŠØ­ Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø®Ø§ØµØ©
- Ø¬ÙˆØ§Ù†Ø§Øª ÙˆØ­Ù„Ù‚Ø§Øª Ù…Ø·Ø§Ø·ÙŠØ©

ðŸ’¡ **Ù†ØµÙŠØ­Ø©:** Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©ØŒ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙƒØ§ÙÙŠØ©. Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø§Ù„Ø£ÙØ¶Ù„ Ø§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø© Ø¨Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù Ù„Ø¯ÙŠÙ‡ Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©."""

        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ† Ø£Ùˆ Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø¹Ø§Ø¬Ù„Ø©
        elif any(word in message_lower for word in ['Ø³Ø¨Ø§Ùƒ', 'Ø³Ø¨Ø§ÙƒÙŠÙ†', 'Ø¨Ø­Ø«', 'Ø£Ø¨Ø­Ø«', 'Ø¹Ø§Ø¬Ù„', 'Ø·ÙˆØ§Ø±Ø¦', 'ÙÙˆØ±ÙŠ']) and not any(word in message_lower for word in ['Ø£Ø¯ÙˆØ§Øª', 'Ø¹Ø¯Ø©']):
            if any(word in message_lower for word in ['Ø¹Ø§Ø¬Ù„', 'Ø·ÙˆØ§Ø±Ø¦', 'ÙÙˆØ±ÙŠ', 'Ø³Ø±ÙŠØ¹']):
                response = """ðŸš¨ **Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ø¬Ù„Ø©:**

âš¡ **Ø®Ø·ÙˆØ§Øª Ø³Ø±ÙŠØ¹Ø©:**
1. **Ø£ØºÙ„Ù‚ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙÙˆØ±Ø§Ù‹** Ù…Ù† Ø§Ù„ØµÙ…Ø§Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
2. **Ø§ØªØµÙ„ Ø¨Ø³Ø¨Ø§Ùƒ Ø·ÙˆØ§Ø±Ø¦** Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹Ù†Ø§
3. **Ø§Ø¨Ø­Ø« Ø¹Ù† "Ø®Ø¯Ù…Ø© Ø·ÙˆØ§Ø±Ø¦"** ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ†
4. **Ø§Ø®ØªØ± Ø³Ø¨Ø§Ùƒ Ù…ØªØ§Ø­ 24 Ø³Ø§Ø¹Ø©**

ðŸ” **Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø³Ø¨Ø§Ùƒ Ø·ÙˆØ§Ø±Ø¦:**
- Ø§Ø°Ù‡Ø¨ Ù„ØµÙØ­Ø© "Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ†"
- ÙÙ„ØªØ± Ø§Ù„Ø¨Ø­Ø«: "Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù†" Ø£Ùˆ "Ø·ÙˆØ§Ø±Ø¦"
- Ø§Ø®ØªØ± Ø£Ù‚Ø±Ø¨ Ø³Ø¨Ø§Ùƒ Ù„Ù…Ù†Ø·Ù‚ØªÙƒ
- Ø§ØªØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø£Ùˆ Ø§Ø­Ø¬Ø² Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹

ðŸ“ž **Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©:**
- ÙˆØ¶Ø­ Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø¯Ù‚Ø©
- Ø§Ø°ÙƒØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¥Ù„Ø­Ø§Ø­
- ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ø³Ø¨Ø§Ùƒ ÙÙˆØ±Ø§Ù‹

âš ï¸ **ØªØ°ÙƒØ±:** ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ù‡Ù…Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø£Ø¶Ø±Ø§Ø±!"""
            else:
                response = """Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙØ¶Ù„ Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ† ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª:

ðŸ” **ÙƒÙŠÙÙŠØ© Ø§Ù„Ø¨Ø­Ø«:**
1. Ø§Ø°Ù‡Ø¨ Ù„ØµÙØ­Ø© "Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ†" ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹
2. Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚ØªÙƒ (Ø­ÙˆÙ„ÙŠØŒ Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØŒ Ø§Ù„Ø¬Ù‡Ø±Ø§Ø¡ØŒ Ø¥Ù„Ø®)
3. Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª
4. Ù‚Ø§Ø±Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª

â­ **Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±:**
- Ø§Ø®ØªØ± Ø³Ø¨Ø§Ùƒ Ø¨ØªÙ‚ÙŠÙŠÙ… Ø¹Ø§Ù„ÙŠ (4+ Ù†Ø¬ÙˆÙ…)
- Ø§Ù‚Ø±Ø£ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ø³Ø§Ø¨Ù‚ÙŠÙ†
- ØªØ£ÙƒØ¯ Ù…Ù† ØªÙˆÙØ± Ø§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ
- Ù‚Ø§Ø±Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø³Ù†ÙˆØ§Øª Ø§Ù„Ø®Ø¨Ø±Ø©

ðŸ† **Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ÙƒÙˆÙŠØª:**
- Ø­ÙˆÙ„ÙŠØŒ Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠØŒ Ø§Ù„Ø¬Ù‡Ø±Ø§Ø¡
- Ø§Ù„ÙØ±ÙˆØ§Ù†ÙŠØ©ØŒ Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„ÙƒØ¨ÙŠØ±
- Ø§Ù„Ø¹Ø§ØµÙ…Ø©ØŒ Ø§Ù„ÙØ­ÙŠØ­ÙŠÙ„"""

        elif any(word in message_lower for word in ['Ù…ÙˆÙ‚Ø¹', 'Ø§Ø³ØªØ®Ø¯Ø§Ù…', 'ÙƒÙŠÙ', 'Ø·Ø±ÙŠÙ‚Ø©']):
            response = """Ø´Ø±Ø­ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙˆÙ‚Ø¹ PlumbingConnect:

ðŸ“± **Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
1. **Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ†:** ØªØµÙØ­ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ† ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ
2. **Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø©:** Ø§Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯ Ù…Ø¹ Ø§Ù„Ø³Ø¨Ø§Ùƒ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
3. **Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª:** ØªÙˆØ§ØµÙ„ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ø¹ Ø§Ù„Ø³Ø¨Ø§ÙƒÙŠÙ†
4. **Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª:** Ø§Ù‚Ø±Ø£ ÙˆØ§ÙƒØªØ¨ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„Ù„Ø®Ø¯Ù…Ø§Øª
5. **Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª:** Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ù†ØµØ§Ø¦Ø­ ÙˆÙ…Ù‚Ø§Ù„Ø§Øª Ù…ÙÙŠØ¯Ø©

ðŸŽ¯ **ÙƒÙŠÙÙŠØ© Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©:**
1. Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¨Ø§Ùƒ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©"
3. Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©
4. Ø­Ø¯Ø¯ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
5. Ø§Ù†ØªØ¸Ø± ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³Ø¨Ø§Ùƒ"""

        elif any(word in message_lower for word in ['Ù…Ø±Ø­Ø¨Ø§', 'Ø§Ù„Ø³Ù„Ø§Ù…', 'Ø£Ù‡Ù„Ø§', 'Ù…Ø³Ø§Ø¡', 'ØµØ¨Ø§Ø­']):
            response = """Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ PlumbingConnect! ðŸ‘‹

Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ ÙˆØ£Ø³Ø¹Ø¯ Ø¨Ø®Ø¯Ù…ØªÙƒ. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:

ðŸ”§ **Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø¨Ø§ÙƒØ©:**
- Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ³Ø±ÙŠØ¨ ÙˆØ§Ù„Ø§Ù†Ø³Ø¯Ø§Ø¯
- Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©
- Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©

ðŸ” **Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹:**
- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ† Ù…Ø­ØªØ±ÙÙŠÙ†
- Ø·Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ­Ø¬Ø² Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯
- Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª

ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ"""

        elif any(word in message_lower for word in ['Ø´ÙƒØ±Ø§', 'Ø´ÙƒØ±Ø§Ù‹', 'Ù…Ù…ØªØ§Ø²', 'Ø±Ø§Ø¦Ø¹']):
            response = """Ø§Ù„Ø¹ÙÙˆ! Ø³Ø¹ÙŠØ¯ Ù„Ø£Ù†Ù†ÙŠ ØªÙ…ÙƒÙ†Øª Ù…Ù† Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ðŸ˜Š

Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© Ø£Ø®Ø±Ù‰ Ø­ÙˆÙ„:
- Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø¨Ø§ÙƒØ©
- Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹
- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ†
- Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±

Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø³Ø¤Ø§Ù„ÙŠ. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹!"""

        # Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø±Ø­Ø§Ø¶
        elif any(word in message_lower for word in ['Ù…Ø±Ø­Ø§Ø¶', 'ØªÙˆØ§Ù„ÙŠØª', 'ÙƒØ±Ø³ÙŠ', 'Ø³ÙŠÙÙˆÙ†']):
            response = """Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø±Ø­Ø§Ø¶ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ÙˆØ­Ù„ÙˆÙ„Ù‡Ø§:

ðŸš½ **Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø·Ø±Ø¯ (Ø§Ù„Ø³ÙŠÙÙˆÙ†):**
- **Ù„Ø§ ÙŠØ·Ø±Ø¯:** Ø§ÙØ­Øµ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…ÙŠØ§Ù‡ ÙÙŠ Ø§Ù„Ø®Ø²Ø§Ù†
- **Ø·Ø±Ø¯ Ø¶Ø¹ÙŠÙ:** Ù†Ø¸Ù ÙØªØ­Ø§Øª Ø§Ù„Ø·Ø±Ø¯
- **Ø·Ø±Ø¯ Ù…Ø³ØªÙ…Ø±:** Ø§Ø¶Ø¨Ø· Ø¹ÙˆØ§Ù…Ø© Ø§Ù„Ø®Ø²Ø§Ù†

ðŸ”§ **Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ³Ø±ÙŠØ¨:**
- **Ù…Ù† Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©:** Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ù…Ø·Ø§Ø·ÙŠØ©
- **Ù…Ù† Ø§Ù„Ø®Ø²Ø§Ù†:** Ø§ÙØ­Øµ ØµÙ…Ø§Ù… Ø§Ù„Ø·Ø±Ø¯
- **ØµÙˆØª Ù…ÙŠØ§Ù‡ Ù…Ø³ØªÙ…Ø±:** Ø§Ø¶Ø¨Ø· Ø§Ù„Ø¹ÙˆØ§Ù…Ø©

âš ï¸ **ØªØ­Ø°ÙŠØ±Ø§Øª Ù…Ù‡Ù…Ø©:**
- Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ù…ÙˆØ§Ø¯ ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØ© Ù‚ÙˆÙŠØ©
- Ù„Ø§ ØªØ¶Ø¹ Ø£Ø´ÙŠØ§Ø¡ ØµÙ„Ø¨Ø© ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ø§Ø¶
- Ù„Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø§Ø³ØªØ¹Ù† Ø¨Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù

Ù‡Ù„ ØªØ­ØªØ§Ø¬ ØªÙØ§ØµÙŠÙ„ Ø£ÙƒØ«Ø± Ø¹Ù† Ù…Ø´ÙƒÙ„Ø© Ù…Ø¹ÙŠÙ†Ø©ØŸ"""

        # Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø®Ø§Ù†
        elif any(word in message_lower for word in ['Ø³Ø®Ø§Ù†', 'Ù…Ø§Ø¡ Ø³Ø§Ø®Ù†', 'Ù…ÙŠØ§Ù‡ Ø³Ø§Ø®Ù†Ø©', 'ØªØ³Ø®ÙŠÙ†']):
            response = """Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø®Ø§Ù† ÙˆØ­Ù„ÙˆÙ„Ù‡Ø§:

ðŸ”¥ **Ù…Ø´Ø§ÙƒÙ„ Ø´Ø§Ø¦Ø¹Ø©:**
- **Ù„Ø§ ÙŠØ³Ø®Ù†:** Ø§ÙØ­Øµ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„Ø«Ø±Ù…ÙˆØ³ØªØ§Øª
- **Ù…Ø§Ø¡ ÙØ§ØªØ±:** Ø§Ø¶Ø¨Ø· Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©
- **ØªØ³Ø±ÙŠØ¨:** Ø§ÙØ­Øµ Ø§Ù„ØµÙ…Ø§Ù…Ø§Øª ÙˆØ§Ù„Ø£Ù†Ø§Ø¨ÙŠØ¨
- **ØµÙˆØª ØºØ±ÙŠØ¨:** Ù‚Ø¯ ØªØ­ØªØ§Ø¬ ØªÙ†Ø¸ÙŠÙ Ù…Ù† Ø§Ù„ØªØ±Ø³Ø¨Ø§Øª

ðŸ”§ **ØµÙŠØ§Ù†Ø© ÙˆÙ‚Ø§Ø¦ÙŠØ©:**
- Ù†Ø¸Ù Ø§Ù„Ø³Ø®Ø§Ù† ÙƒÙ„ 6 Ø£Ø´Ù‡Ø±
- Ø§ÙØ­Øµ Ø§Ù„Ø£Ù†ÙˆØ¯ Ø³Ù†ÙˆÙŠØ§Ù‹
- Ø§Ø¶Ø¨Ø· Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø¹Ù„Ù‰ 60 Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©

âš ï¸ **ØªØ­Ø°ÙŠØ±:** Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø®Ø§Ù† ØªØ­ØªØ§Ø¬ Ø®Ø¨Ø±Ø©ØŒ Ø§Ø³ØªØ¹Ù† Ø¨Ø³Ø¨Ø§Ùƒ Ù…Ø®ØªØµ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ø®Ø§Ø·Ø±.

ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙÙ†ÙŠÙŠÙ† Ù…Ø®ØªØµÙŠÙ† ÙÙŠ Ø§Ù„Ø³Ø®Ø§Ù†Ø§Øª Ø¹Ø¨Ø± Ù…ÙˆÙ‚Ø¹Ù†Ø§."""



        else:
            # Ø±Ø¯ Ø¹Ø§Ù… Ù…Ø­Ø³Ù† Ù„Ù„Ø£Ø³Ø¦Ù„Ø© ØºÙŠØ± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©
            response = """Ø£ÙÙ‡Ù… Ø£Ù† Ù„Ø¯ÙŠÙƒ Ø³Ø¤Ø§Ù„ Ø­ÙˆÙ„ Ø§Ù„Ø³Ø¨Ø§ÙƒØ©ØŒ Ø¯Ø¹Ù†ÙŠ Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„:

ðŸ”§ **Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø³Ø¨Ø§ÙƒØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©:**
- ØªØ³Ø±ÙŠØ¨ Ø§Ù„Ù…ÙŠØ§Ù‡ (ØµÙ†Ø¨ÙˆØ±ØŒ Ø£Ù†Ø§Ø¨ÙŠØ¨ØŒ Ù…Ø±Ø­Ø§Ø¶)
- Ø§Ù†Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¬Ø§Ø±ÙŠ ÙˆØ§Ù„Ø¨Ø§Ù„ÙˆØ¹Ø§Øª
- ØªØ±ÙƒÙŠØ¨ ÙˆØ¥ØµÙ„Ø§Ø­ Ø§Ù„Ø­Ù†ÙÙŠØ§Øª
- Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø³Ø®Ø§Ù† ÙˆØ§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„Ø³Ø§Ø®Ù†Ø©
- Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø­Ù…Ø§Ù… ÙˆØ§Ù„Ù…Ø·Ø¨Ø®

ðŸ” **Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹:**
- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³Ø¨Ø§ÙƒÙŠÙ† Ù…Ø­ØªØ±ÙÙŠÙ†
- Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø© Ø·ÙˆØ§Ø±Ø¦
- Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª
- Ø­Ø¬Ø² Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„ØµÙŠØ§Ù†Ø©

ðŸ’¬ **Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£ÙØ¶Ù„ØŒ Ø£Ø®Ø¨Ø±Ù†ÙŠ:**
- Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ØŸ
- Ø£ÙŠÙ† Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ (Ø­Ù…Ø§Ù…ØŒ Ù…Ø·Ø¨Ø®ØŒ Ø¥Ù„Ø®)
- Ù‡Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¹Ø§Ø¬Ù„Ø©ØŸ

Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ø¨ÙˆØ¶ÙˆØ­ ÙˆØ³Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨! ðŸ˜Š"""

        return {
            'success': True,
            'response': response,
            'tokens_used': len(message.split()) + len(response.split()),
            'response_time': 0.5,
            'model': 'mock-ai-smart'
        }


def get_ai_client(model_name: str = None) -> AIClientBase:
    """Factory function to get the appropriate AI client"""
    if not model_name:
        model_name = getattr(settings, 'AI_DEFAULT_MODEL', 'mock')

    if model_name.lower() == 'grok':
        return GrokClient()
    elif model_name.lower() == 'deepseek':
        return DeepSeekClient()
    elif model_name.lower() == 'mock':
        return MockAIClient()
    else:
        # Default to Mock for testing
        return MockAIClient()
